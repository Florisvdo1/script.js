// Emoji Data with 300+ Emojis across 10 Categories
const emojiData = {
  "Activities": [
    "🚗","🏃‍♂️","🧘‍♀️","🚴‍♀️","🏊‍♂️","🛹","🧗‍♂️","🏋️‍♀️","🤸‍♂️","🕺",
    "🎨","🎮","🎭","🎤","🎧","🎼","🎹","🥁","🎷","🎸",
    "🎺","🎻","🎬","🖼️","🖌️","🧩","🎯","🎱","🏓","🏸",
    "🥅","🏒","🏑","🥍","🏏","🏹","🎣","🥊","🥋","⛸️",
    "🏂","⛷️","🏌️‍♀️","🏌️‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️","🤽‍♀️","🤽‍♂️",
    "🏋️‍♂️","🚣‍♀️","🚣‍♂️","🤺","🤾‍♀️","🤾‍♂️","🏇","🚵‍♀️","🚵‍♂️","🧗‍♀️",
    "🧗‍♂️","🏹","🏂","🏄","🪂","🏄‍♀️","🏄‍♂️","🚣","🚣‍♀️","🚣‍♂️",
    "🤾‍♀️","🤾‍♂️","🏋️‍♀️","🏋️‍♂️","🥇","🥈","🥉","🏅","🎖️","🏆",
    "🏸","🏓","🏐","🏉","🏈","⚽","🏀","🏈","⚾","🎾",
    "🥏","🏐","🏉","🏈","⚽","🏀","⚾","🎾","🥏","🎳"
  ],
  "Cars": [
    "🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐",
    "🚚","🚛","🚜","🏍️","🛵","🚲","🛴","🚏","🛣️","🛤️",
    "🚨","🚥","🚦","⛽","🚧","⚓","⛵","🛶","🚤","🛳️",
    "🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉",
    "🚊","🚝","🚞","🚟","🚠","🚡","🚟","🚠","🚡","🚟",
    "🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝",
    "🚞","🚟","🚠","🚡","🚂","🚃","🚄","🚅","🚆","🚇",
    "🚈","🚉","🚊","🚝","🚞","🚟","🚠","🚡","🚀","🚁",
    "🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝",
    "🚞","🚟","🚠","🚡","🚀","🚁","🚂","🚃","🚄","🚅",
    "🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚟","🚠","🚡"
  ],
  "Wellness": [
    "🧘‍♀️","🏋️‍♀️","🛀","🧖‍♂️","🧗‍♀️","🤸‍♀️","🥋","🏄‍♂️","🤼‍♂️","🧘‍♂️",
    "🧘","🧘‍♂️","🧘‍♀️","🧗","🧗‍♂️","🧗‍♀️","🏋️","🏋️‍♂️","🏋️‍♀️","🤸",
    "🤸‍♂️","🤸‍♀️","🛀","🧖‍♀️","🧖‍♂️","🧗‍♂️","🧗‍♀️","🥋","🏄‍♀️","🏄",
    "🤼‍♀️","🤼‍♂️","🧘‍♀️","🧘‍♂️","🧘","🧘‍♀️","🧗‍♂️","🧗‍♀️","🏋️","🏋️‍♂️",
    "🏋️‍♀️","🤸","🤸‍♂️","🤸‍♀️","🛀","🧖‍♀️","🧖‍♂️","🧗‍♂️","🧗‍♀️","🥋",
    "🏄‍♀️","🏄","🤼‍♀️","🤼‍♂️","🧘‍♀️","🧘‍♂️","🧘","🧘‍♀️","🧗‍♂️","🧗‍♀️",
    "🏋️","🏋️‍♂️","🏋️‍♀️","🤸","🤸‍♂️","🤸‍♀️","🛀","🧖‍♀️","🧖‍♂️","🧗‍♂️",
    "🧗‍♀️","🥋","🏄‍♀️","🏄","🤼‍♀️","🤼‍♂️","🧘‍♀️","🧘‍♂️","🧘","🧘‍♀️",
    "🧗‍♂️","🧗‍♀️","🏋️","🏋️‍♂️","🏋️‍♀️","🤸","🤸‍♂️","🤸‍♀️","🛀","🧖‍♀️",
    "🧖‍♂️","🧗‍♂️","🧗‍♀️","🥋","🏄‍♀️","🏄","🤼‍♀️","🤼‍♂️","🧘‍♀️","🧘‍♂️"
  ],
  "Walking": [
    "🚶‍♀️","🚶‍♂️","🧍‍♀️","🧍‍♂️","🧎‍♀️","🧎‍♂️","👟","🥾","👣","🦶",
    "🚶","🚶‍♀️","🚶‍♂️","🧍","🧍‍♀️","🧍‍♂️","🧎","🧎‍♀️","🧎‍♂️","👟",
    "🥾","👣","🦶","🚶‍♀️","🚶‍♂️","🧍‍♀️","🧍‍♂️","🧎‍♀️","🧎‍♂️","👟",
    "🥾","👣","🦶","🚶","🚶‍♀️","🚶‍♂️","🧍","🧍‍♀️","🧍‍♂️","🧎",
    "🧎‍♀️","🧎‍♂️","👟","🥾","👣","🦶","🚶‍♀️","🚶‍♂️","🧍‍♀️","🧍‍♂️",
    "🧎‍♀️","🧎‍♂️","👟","🥾","👣","🦶","🚶","🚶‍♀️","🚶‍♂️","🧍",
    "🧍‍♀️","🧍‍♂️","🧎","🧎‍♀️","🧎‍♂️","👟","🥾","👣","🦶","🚶‍♀️",
    "🚶‍♂️","🧍‍♀️","🧍‍♂️","🧎‍♀️","🧎‍♂️","👟","🥾","👣","🦶","🚶",
    "🚶‍♀️","🚶‍♂️","🧍","🧍‍♀️","🧍‍♂️","🧎","🧎‍♀️","🧎‍♂️","👟","🥾",
    "👣","🦶","🚶‍♀️","🚶‍♂️","🧍‍♀️","🧍‍♂️","🧎‍♀️","🧎‍♂️","👟","🥾"
  ],
  "Yoga": [
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏",
    "🧘‍♀️","🧘‍♂️","🕉️","🧘","🧘‍♀️","🤸‍♂️","🧎‍♂️","🤲","🙌","🙏"
  ],
  "Music": [
    "🎵","🎶","🎤","🎧","🎼","🎹","🥁","🎷","🎸","🎺",
    "🎻","🎬","🖼️","🖌️","🧩","🎯","🎱","🎳","🎮","🎭",
    "🎨","🎤","🎧","🎼","🎹","🥁","🎷","🎸","🎺","🎻",
    "🎬","🖼️","🖌️","🧩","🎯","🎱","🎳","🎮","🎭","🎨",
    "🎤","🎧","🎼","🎹","🥁","🎷","🎸","🎺","🎻","🎬",
    "🖼️","🖌️","🧩","🎯","🎱","🎳","🎮","🎭","🎨","🎤",
    "🎧","🎼","🎹","🥁","🎷","🎸","🎺","🎻","🎬","🖼️",
    "🖌️","🧩","🎯","🎱","🎳","🎮","🎭","🎨","🎤","🎧",
    "🎼","🎹","🥁","🎷","🎸","🎺","🎻","🎬","🖼️","🖌️",
    "🧩","🎯","🎱","🎳","🎮","🎭","🎨","🎤","🎧","🎼"
  ],
  "Sports": [
    "⚽","🏀","🏈","⚾","🎾","🏐","🏉","🥏","🎱","🏓",
    "🏸","🥅","🏒","🏑","🥍","🏏","🏹","🎣","🥊","🥋",
    "⛸️","🏂","⛷️","🏌️‍♀️","🏌️‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️","🤽‍♀️",
    "🤽‍♂️","🏋️‍♀️","🏋️‍♂️","🥇","🥈","🥉","🏅","🎖️","🏆","🏸",
    "🏓","🏐","🏉","🏈","⚽","🏀","⚾","🎾","🥏","🎱",
    "🏓","🏸","🥅","🏒","🏑","🥍","🏏","🏹","🎣","🥊",
    "🥋","⛸️","🏂","⛷️","🏌️‍♀️","🏌️‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️",
    "🤽‍♀️","🤽‍♂️","🏋️‍♀️","🏋️‍♂️","🥇","🥈","🥉","🏅","🎖️","🏆",
    "🏓","🏸","🥅","🏒","🏑","🥍","🏏","🏹","🎣","🥊",
    "🥋","⛸️","🏂","⛷️","🏌️‍♀️","🏌️‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️"
  ],
  "Food": [
    "🍎","🍌","🍓","🍕","🍔","🍟","🍣","🍩","🍪","🥗",
    "🍰","🍫","🍿","🍤","🍱","🥟","🍛","🍜","🍝","🍲",
    "🍢","🍡","🍧","🍨","🍦","🍥","🥧","🍮","🍯","🍰",
    "🍬","🍭","🍮","🍯","🥧","🍰","🍦","🍨","🍧","🍫",
    "🍬","🍭","🍮","🍯","🥧","🍰","🍦","🍨","🍧","🍫",
    "🍬","🍭","🍮","🍯","🥧","🍰","🍦","🍨","🍧","🍫",
    "🍬","🍭","🍮","🍯","🥧","🍰","🍦","🍨","🍧","🍫",
    "🍬","🍭","🍮","🍯","🥧","🍰","🍦","🍨","🍧","🍫",
    "🍬","🍭","🍮","🍯","🥧","🍰","🍦","🍨","🍧","🍫",
    "🍬","🍭","🍮","🍯","🥧","🍰","🍦","🍨","🍧","🍫"
  ],
  "Travel": [
    "✈️","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈",
    "🚉","🚊","🚝","🚞","🚟","🚠","🚡","🚂","🚃","🚄",
    "🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚟","🚠",
    "🚡","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊",
    "🚝","🚞","🚟","🚠","🚡","🚂","🚃","🚄","🚅","🚆",
    "🚇","🚈","🚉","🚊","🚝","🚞","🚟","🚠","🚡","🚂",
    "🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞",
    "🚟","🚠","🚡","🚂","🚃","🚄","🚅","🚆","🚇","🚈",
    "🚉","🚊","🚝","🚞","🚟","🚠","🚡","🚂","🚃","🚄",
    "🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚟","🚠"
  ],
  "Technology": [
    "💻","🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞",
    "☎️","📟","📠","📺","📻","🖥️","🖨️","⌨️","🖱️","🖲️",
    "🕹️","📱","📲","📞","☎️","📟","📠","📺","📻","💻",
    "🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞","☎️",
    "📟","📠","📺","📻","💻","🖥️","🖨️","⌨️","🖱️","🖲️",
    "🕹️","📱","📲","📞","☎️","📟","📠","📺","📻","💻",
    "🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞","☎️",
    "📟","📠","📺","📻","💻","🖥️","🖨️","⌨️","🖱️","🖲️",
    "🕹️","📱","📲","📞","☎️","📟","📠","📺","📻","💻",
    "🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞","☎️"
  ],
  "Nature": [
    "🌲","🌳","🌴","🌵","🎄","🌺","🌻","🌼","🌷","🌹",
    "🌸","🌱","🌿","🍃","🍂","🍁","🍄","🌾","🌰","🌲",
    "🌳","🌴","🌵","🎄","🌺","🌻","🌼","🌷","🌹","🌸",
    "🌱","🌿","🍃","🍂","🍁","🍄","🌾","🌰","🌲","🌳",
    "🌴","🌵","🎄","🌺","🌻","🌼","🌷","🌹","🌸","🌱",
    "🌿","🍃","🍂","🍁","🍄","🌾","🌰","🌲","🌳","🌴",
    "🌵","🎄","🌺","🌻","🌼","🌷","🌹","🌸","🌱","🌿",
    "🍃","🍂","🍁","🍄","🌾","🌰","🌲","🌳","🌴","🌵",
    "🎄","🌺","🌻","🌼","🌷","🌹","🌸","🌱","🌿","🍃",
    "🍂","🍁","🍄","🌾","🌰","🌲","🌳","🌴","🌵","🎄"
  ],
  "Animals": [
    "🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐨","🐯",
    "🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒",
    "🦍","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉",
    "🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐞",
    "🐜","🪲","🕷️","🕸️","🦂","🦟","🦗","🪰","🪱","🦠",
    "🐢","🐍","🦎","🐙","🦑","🦐","🦞","🦀","🐡","🐠",
    "🐟","🐬","🦈","🐳","🐋","🐊","🐅","🐆","🦓","🦍",
    "🦧","🐘","🦣","🐪","🐫","🦒","🦏","🦛","🐂","🐃",
    "🐄","🐖","🐏","🐑","🦙","🐐","🐓","🦃","🕊️","🐕",
    "🐩","🐈","🐇","🐁","🐀","🐿️","🦔","🐉","🐲","🦕"
  ],
  "Travel": [
    "✈️","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈",
    "🚉","🚊","🚝","🚞","🚟","🚠","🚡","🚂","🚃","🚄",
    "🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚟","🚠",
    "🚡","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊",
    "🚝","🚞","🚟","🚠","🚡","🚂","🚃","🚄","🚅","🚆",
    "🚇","🚈","🚉","🚊","🚝","🚞","🚟","🚠","🚡","🚂",
    "🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞",
    "🚟","🚠","🚡","🚂","🚃","🚄","🚅","🚆","🚇","🚈",
    "🚉","🚊","🚝","🚞","🚟","🚠","🚡","🚂","🚃","🚄",
    "🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚟","🚠"
  ],
  "Technology": [
    "💻","🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞",
    "☎️","📟","📠","📺","📻","🖥️","🖨️","⌨️","🖱️","🖲️",
    "🕹️","📱","📲","📞","☎️","📟","📠","📺","📻","💻",
    "🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞","☎️",
    "📟","📠","📺","📻","💻","🖥️","🖨️","⌨️","🖱️","🖲️",
    "🕹️","📱","📲","📞","☎️","📟","📠","📺","📻","💻",
    "🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞","☎️",
    "📟","📠","📺","📻","💻","🖥️","🖨️","⌨️","🖱️","🖲️",
    "🕹️","📱","📲","📞","☎️","📟","📠","📺","📻","💻",
    "🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","📱","📲","📞","☎️"
  ]
};

// Current Category
let currentCategory = 'Activities';

// Function to load emojis into the grid
function loadEmojis() {
  const grid = document.getElementById('emoji-grid');
  grid.innerHTML = ''; // Clear existing emojis
  emojiData[currentCategory].forEach(emoji => {
    const emojiElement = document.createElement('div');
    emojiElement.classList.add('emoji-item');
    emojiElement.textContent = emoji;
    emojiElement.draggable = true;

    // Drag Events
    emojiElement.addEventListener('dragstart', dragStart);
    emojiElement.addEventListener('touchstart', touchStart, { passive: false });

    grid.appendChild(emojiElement);
  });
}

// Drag Functions
let draggedEmoji = null;

function dragStart(e) {
  draggedEmoji = e.target.textContent;
  e.dataTransfer.setData('text/plain', draggedEmoji);
  // Mobile vibration feedback
  if (navigator.vibrate) {
    navigator.vibrate(50);
  }
}

// Drop Zone Events
const placeholders = document.querySelectorAll('.emoji-placeholder');

placeholders.forEach(placeholder => {
  placeholder.addEventListener('dragover', dragOver);
  placeholder.addEventListener('dragleave', dragLeave);
  placeholder.addEventListener('drop', drop);
});

function dragOver(e) {
  e.preventDefault();
  this.classList.add('highlight');
}

function dragLeave(e) {
  this.classList.remove('highlight');
}

function drop(e) {
  e.preventDefault();
  this.classList.remove('highlight');
  this.textContent = draggedEmoji;
  // Magnet attach effect
  this.classList.add('magnet-effect');
  setTimeout(() => {
    this.classList.remove('magnet-effect');
  }, 300);
  // Save state
  saveState();
  // Mobile vibration feedback
  if (navigator.vibrate) {
    navigator.vibrate(50);
  }
}

// Touch Drag-and-Drop
function touchStart(e) {
  e.preventDefault();
  const touch = e.touches[0];
  draggedEmoji = e.target.textContent;

  const ghost = document.createElement('div');
  ghost.classList.add('emoji-item', 'ghost');
  ghost.style.position = 'absolute';
  ghost.style.left = `${touch.pageX - 15}px`;
  ghost.style.top = `${touch.pageY - 15}px`;
  ghost.textContent = draggedEmoji;
  ghost.style.pointerEvents = 'none';
  ghost.style.zIndex = '1000';
  ghost.style.animation = 'zoomEmoji 5s infinite';
  document.body.appendChild(ghost);

  function moveTouch(e) {
    const touch = e.touches[0];
    ghost.style.left = `${touch.pageX - 15}px`;
    ghost.style.top = `${touch.pageY - 15}px`;

    // Highlight potential drop targets
    const elem = document.elementFromPoint(touch.clientX, touch.clientY);
    if (elem && elem.classList.contains('emoji-placeholder')) {
      elem.classList.add('highlight');
    } else {
      placeholders.forEach(ph => ph.classList.remove('highlight'));
    }
  }

  function endTouch(e) {
    const touch = e.changedTouches[0];
    const elem = document.elementFromPoint(touch.clientX, touch.clientY);
    if (elem && elem.classList.contains('emoji-placeholder')) {
      elem.textContent = draggedEmoji;
      // Magnet attach effect
      elem.classList.add('magnet-effect');
      setTimeout(() => {
        elem.classList.remove('magnet-effect');
      }, 300);
      // Save state
      saveState();
      // Mobile vibration feedback
      if (navigator.vibrate) {
        navigator.vibrate(50);
      }
    }
    ghost.remove();
    document.removeEventListener('touchmove', moveTouch);
    document.removeEventListener('touchend', endTouch);
    placeholders.forEach(ph => ph.classList.remove('highlight'));
  }

  // Attach event listeners for touch move and end
  document.addEventListener('touchmove', moveTouch, { passive: false });
  document.addEventListener('touchend', endTouch, { passive: false });

  // Mobile vibration feedback
  if (navigator.vibrate) {
    navigator.vibrate(50);
  }
}

// Category Navigation
document.getElementById('next-page').addEventListener('click', () => {
  const categoryKeys = Object.keys(emojiData);
  let index = categoryKeys.indexOf(currentCategory);
  index = (index + 1) % categoryKeys.length;
  currentCategory = categoryKeys[index];
  document.getElementById('category-name').textContent = currentCategory;
  loadEmojis();
});

document.getElementById('prev-page').addEventListener('click', () => {
  const categoryKeys = Object.keys(emojiData);
  let index = categoryKeys.indexOf(currentCategory);
  index = (index - 1 + categoryKeys.length) % categoryKeys.length;
  currentCategory = categoryKeys[index];
  document.getElementById('category-name').textContent = currentCategory;
  loadEmojis();
});

// Reset Functionality
document.getElementById('reset-button').addEventListener('click', () => {
  placeholders.forEach(ph => ph.textContent = '');
  localStorage.removeItem('emojiState');
});

// Huiswerk Button Functionality
const huiswerkButton = document.getElementById('huiswerk-button');
huiswerkButton.addEventListener('click', () => {
  huiswerkButton.classList.toggle('green');
});

// Save and Load State
function saveState() {
  const state = {};
  placeholders.forEach((ph, index) => {
    state[index] = ph.textContent;
  });
  localStorage.setItem('emojiState', JSON.stringify(state));
}

function loadState() {
  const state = JSON.parse(localStorage.getItem('emojiState'));
  if (state) {
    placeholders.forEach((ph, index) => {
      if (state[index]) {
        ph.textContent = state[index];
      }
    });
  }
}

// Initialize
loadEmojis();
loadState();

// Live Time Update Functionality
function updateTime() {
  const now = new Date();
  const timeString = now.toLocaleTimeString();
  document.getElementById('live-time').textContent = timeString;
}
setInterval(updateTime, 1000); // Update every second
updateTime(); // Initial call

// Layout Adjustment Based on Viewport
function adjustLayout() {
  const header = document.querySelector('header');
  const huiswerkContainer = document.getElementById('huiswerk-container');
  const planner = document.getElementById('planner');
  const emojiDeck = document.getElementById('emoji-deck');

  const windowHeight = window.innerHeight;
  const headerHeight = header.offsetHeight;
  const huiswerkHeight = huiswerkContainer.offsetHeight;
  const emojiDeckHeight = emojiDeck.offsetHeight;

  const availableHeight = windowHeight - (headerHeight + huiswerkHeight + emojiDeckHeight);

  // Adjust planner height to fit within the remaining viewport
  planner.style.height = `${availableHeight}px`;
}

// Attach event listeners for window load and resize to adjust layout
window.addEventListener('load', adjustLayout);
window.addEventListener('resize', adjustLayout);

// Welcome Screen Functionality
const welcomeScreen = document.getElementById('welcome-screen');
const nextSlideBtn = document.getElementById('next-slide');
const prevSlideBtn = document.getElementById('prev-slide');
const finishWelcomeBtn = document.getElementById('finish-welcome');
const skipWelcomeBtn = document.getElementById('skip-welcome');
const dots = document.querySelectorAll('.dot');
let currentSlide = 1;
const totalSlides = 3;

function showSlide(n) {
  const slides = document.querySelectorAll('.slide');
  if (n > totalSlides) { currentSlide = 1; }
  if (n < 1) { currentSlide = totalSlides; }
  slides.forEach((slide, index) => {
    slide.classList.remove('active');
    if (index === currentSlide - 1) {
      slide.classList.add('active');
    }
  });
  dots.forEach(dot => {
    dot.classList.remove('active');
    if (parseInt(dot.getAttribute('data-slide')) === currentSlide) {
      dot.classList.add('active');
    }
  });
}

function nextSlideFunction() {
  currentSlide++;
  showSlide(currentSlide);
}

function prevSlideFunction() {
  currentSlide--;
  showSlide(currentSlide);
}

function goToSlide(n) {
  currentSlide = n;
  showSlide(currentSlide);
}

nextSlideBtn.addEventListener('click', nextSlideFunction);
prevSlideBtn.addEventListener('click', prevSlideFunction);
finishWelcomeBtn.addEventListener('click', () => {
  welcomeScreen.style.display = 'none';
});
skipWelcomeBtn.addEventListener('click', () => {
  welcomeScreen.style.display = 'none';
});
dots.forEach(dot => {
  dot.addEventListener('click', () => {
    const slideNumber = parseInt(dot.getAttribute('data-slide'));
    goToSlide(slideNumber);
  });
});
